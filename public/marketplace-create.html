<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Jual Barang - Marketplace SampahKuPilah</title>
    <link rel="stylesheet" href="css/common.css" />
    <link rel="stylesheet" href="css/marketplace.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
  </head>
  <body class="marketplace-body">
    <div class="marketplace-background" aria-hidden="true"></div>
    
    <header class="marketplace-header">
      <div class="header-inner">
        <a class="back-link" href="marketplace.html">
          <i class="fas fa-arrow-left"></i> Kembali ke Marketplace
        </a>
        <div class="header-title">
          <h1><i class="fas fa-plus-circle"></i> Jual Barang</h1>
          <p class="header-description">
            Daftarkan barang daur ulang Anda untuk dijual di marketplace. Bantu ekonomi sirkular!
          </p>
        </div>
      </div>
    </header>

    <main class="marketplace-main">
      <div class="marketplace-content" style="max-width: 800px; margin: 0 auto;">
        <form id="createListingForm" class="create-listing-form">
          <!-- Title -->
          <div class="form-group">
            <label for="title" class="form-label">
              <i class="fas fa-heading"></i> Judul Produk <span class="required">*</span>
            </label>
            <input
              type="text"
              id="title"
              name="title"
              class="form-input"
              placeholder="Contoh: Botol Plastik Bekas untuk Daur Ulang"
              required
              maxlength="200"
            />
            <small class="form-hint">Judul yang jelas dan deskriptif</small>
          </div>

          <!-- Description -->
          <div class="form-group">
            <label for="description" class="form-label">
              <i class="fas fa-align-left"></i> Deskripsi <span class="required">*</span>
            </label>
            <textarea
              id="description"
              name="description"
              class="form-textarea"
              rows="6"
              placeholder="Jelaskan kondisi barang, ukuran, dan detail lainnya..."
              required
              maxlength="2000"
            ></textarea>
            <small class="form-hint">Maksimal 2000 karakter</small>
          </div>

          <!-- Category -->
          <div class="form-group">
            <label for="category" class="form-label">
              <i class="fas fa-tags"></i> Kategori <span class="required">*</span>
            </label>
            <select id="category" name="category" class="form-select" required>
              <option value="">Pilih Kategori</option>
              <option value="plastik">Plastik</option>
              <option value="elektronik">Elektronik</option>
              <option value="furniture">Furniture</option>
              <option value="pakaian">Pakaian</option>
              <option value="kertas">Kertas</option>
              <option value="logam">Logam</option>
              <option value="kaca">Kaca</option>
              <option value="lainnya">Lainnya</option>
            </select>
          </div>

          <!-- Tags -->
          <div class="form-group">
            <label for="tags" class="form-label">
              <i class="fas fa-hashtag"></i> Tag (opsional)
            </label>
            <input
              type="text"
              id="tags"
              name="tags"
              class="form-input"
              placeholder="Contoh: botol, plastik, bekas, daur ulang (pisahkan dengan koma)"
            />
            <small class="form-hint">Pisahkan tag dengan koma untuk memudahkan pencarian</small>
          </div>

          <!-- Price -->
          <div class="form-group">
            <label for="price" class="form-label">
              <i class="fas fa-money-bill-wave"></i> Harga (Rp)
            </label>
            <input
              type="number"
              id="price"
              name="price"
              class="form-input"
              placeholder="0"
              min="0"
              step="1000"
            />
            <small class="form-hint">Kosongkan atau isi 0 untuk gratis</small>
          </div>

          <!-- Location -->
          <div class="form-group">
            <label class="form-label">
              <i class="fas fa-map-marker-alt"></i> Lokasi
            </label>
            <div class="location-dropdowns">
              <select id="location_province" name="location_province" class="form-select">
                <option value="">Pilih Provinsi</option>
              </select>
              <select id="location_city" name="location_city" class="form-select" disabled>
                <option value="">Pilih Kota/Kabupaten</option>
              </select>
              <select id="location_district" name="location_district" class="form-select" disabled>
                <option value="">Pilih Kecamatan</option>
              </select>
              <select id="location_village" name="location_village" class="form-select" disabled>
                <option value="">Pilih Desa/Kelurahan</option>
              </select>
            </div>
            <small class="form-hint">Pilih lokasi secara berurutan dari provinsi hingga desa</small>
          </div>

          <!-- Images -->
          <div class="form-group">
            <label class="form-label">
              <i class="fas fa-images"></i> Gambar Produk
            </label>
            <div class="image-enhancement-toggle" style="margin-bottom: var(--spacing-3);">
              <label class="form-checkbox-label">
                <input type="checkbox" id="enableImageEnhancement" checked />
                <span><i class="fas fa-magic"></i> Auto-enhance gambar (optimize kualitas, ukuran, dan brightness)</span>
              </label>
              <small class="form-hint" style="display: block; margin-top: var(--spacing-1); margin-left: 24px;">
                Gambar akan dioptimasi secara otomatis untuk tampilan yang lebih baik
              </small>
            </div>
            <div id="imageInputs">
              <div class="image-upload-item">
                <input
                  type="file"
                  name="image"
                  class="form-input image-file-input"
                  accept="image/*"
                  style="display: none;"
                />
                <div class="image-preview-container">
                  <div class="image-preview-placeholder">
                    <i class="fas fa-image"></i>
                    <span>Klik untuk pilih gambar</span>
                  </div>
                  <img class="image-preview hidden" alt="Preview" />
                </div>
                <button type="button" class="btn-remove-image" style="display: none;">
                  <i class="fas fa-times"></i> Hapus
                </button>
              </div>
            </div>
            <button type="button" class="btn btn-secondary" id="addImageBtn" style="margin-top: var(--spacing-2);">
              <i class="fas fa-plus"></i> Tambah Gambar
            </button>
            <small class="form-hint">Upload gambar produk (JPG, PNG, maksimal 5MB per gambar). Cocok untuk barang daur ulang dan second hand.</small>
          </div>

          <!-- AI Enhancement Section -->
          <div class="form-group">
            <div class="ai-enhancement-section">
              <button type="button" class="btn btn-secondary" id="enhanceBtn" style="width: 100%;">
                <i class="fas fa-magic"></i> Enhance dengan AI
              </button>
              <small class="form-hint" style="display: block; margin-top: var(--spacing-2);">
                AI akan meningkatkan judul, deskripsi, dan tag agar lebih menarik
              </small>
            </div>
          </div>

          <!-- Submit Button -->
          <div class="form-actions">
            <button type="submit" class="btn btn-primary" id="submitBtn" style="width: 100%;">
              <i class="fas fa-check"></i> Publikasikan Barang
            </button>
            <a href="marketplace.html" class="btn btn-secondary" style="width: 100%; margin-top: var(--spacing-3); text-align: center;">
              <i class="fas fa-times"></i> Batal
            </a>
          </div>
        </form>
      </div>
    </main>

    <!-- AI Enhancement Preview Modal -->
    <div class="enhancement-modal hidden" id="enhancementModal">
      <div class="enhancement-modal-overlay"></div>
      <div class="enhancement-modal-content">
        <div class="enhancement-modal-header">
          <h2><i class="fas fa-magic"></i> Preview Hasil AI Enhancement</h2>
          <button type="button" class="btn-close-modal" id="closeEnhancementModal">
            <i class="fas fa-times"></i>
          </button>
        </div>
        
        <div class="enhancement-preview">
          <!-- Title Comparison -->
          <div class="comparison-section">
            <h3><i class="fas fa-heading"></i> Judul</h3>
            <div class="comparison-row">
              <div class="comparison-item original">
                <label>Asli</label>
                <div class="comparison-content" id="originalTitle">-</div>
              </div>
              <div class="comparison-arrow">→</div>
              <div class="comparison-item enhanced">
                <label>Enhanced</label>
                <div class="comparison-content" id="enhancedTitle">-</div>
              </div>
            </div>
            <button type="button" class="btn-accept-item" data-item="title">
              <i class="fas fa-check"></i> Terima Enhanced
            </button>
          </div>

          <!-- Description Comparison -->
          <div class="comparison-section">
            <h3><i class="fas fa-align-left"></i> Deskripsi</h3>
            <div class="comparison-row">
              <div class="comparison-item original">
                <label>Asli</label>
                <div class="comparison-content" id="originalDescription">-</div>
              </div>
              <div class="comparison-arrow">→</div>
              <div class="comparison-item enhanced">
                <label>Enhanced</label>
                <div class="comparison-content" id="enhancedDescription">-</div>
              </div>
            </div>
            <button type="button" class="btn-accept-item" data-item="description">
              <i class="fas fa-check"></i> Terima Enhanced
            </button>
          </div>

          <!-- Tags Comparison -->
          <div class="comparison-section">
            <h3><i class="fas fa-hashtag"></i> Tag</h3>
            <div class="comparison-row">
              <div class="comparison-item original">
                <label>Asli</label>
                <div class="comparison-tags" id="originalTags">-</div>
              </div>
              <div class="comparison-arrow">→</div>
              <div class="comparison-item enhanced">
                <label>Enhanced</label>
                <div class="comparison-tags" id="enhancedTags">-</div>
              </div>
            </div>
            <button type="button" class="btn-accept-item" data-item="tags">
              <i class="fas fa-check"></i> Terima Enhanced
            </button>
          </div>
        </div>

        <div class="enhancement-modal-actions">
          <button type="button" class="btn btn-secondary" id="regenBtn">
            <i class="fas fa-redo"></i> Generate Ulang
          </button>
          <button type="button" class="btn btn-primary" id="acceptAllBtn">
            <i class="fas fa-check-double"></i> Terima Semua
          </button>
          <button type="button" class="btn btn-secondary" id="cancelEnhancementBtn">
            <i class="fas fa-times"></i> Batal
          </button>
        </div>
      </div>
    </div>

    <script src="js/notification.js"></script>
    <script src="js/indonesia-regions.js"></script>
    <script src="js/marketplace-create.js" defer></script>
  </body>
</html>

